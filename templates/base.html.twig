<!DOCTYPE html>
<html lang="fr">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>{% block title %}Vault.gg{% endblock %}</title>
        <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 128 128%22><text y=%221.2em%22 font-size=%2296%22>üéÆ</text></svg>">
        
        <!-- TailwindCSS CDN -->
        <script src="https://cdn.tailwindcss.com"></script>
        
        <!-- CSS Principal -->
        <link rel="stylesheet" href="{{ asset('css/main.css') }}">
        
        <!-- CSS Sp√©cifique par page -->
        {% block stylesheets %}
        {% endblock %}
    </head>
    <body>
        {% block body %}{% endblock %}
        
        <!-- Lucide Icons CDN -->
        <script src="https://unpkg.com/lucide@latest"></script>
        
        <!-- Theme Toggle Script INLINE -->
        <script>
            console.log("üéÆ Theme Toggle charg√©");
            
            document.addEventListener("DOMContentLoaded", function() {
                console.log("üéÆ DOM pr√™t");
                
                const themeToggle = document.getElementById("theme-toggle");
                const themeIcon = document.getElementById("theme-icon");
                const body = document.body;
                
                if (!themeToggle || !themeIcon) {
                    console.error("‚ùå √âl√©ments introuvables");
                    return;
                }
                
                console.log("‚úÖ √âl√©ments trouv√©s");
                
                // Charger le th√®me sauvegard√©
                const savedTheme = localStorage.getItem("theme") || "dark";
                console.log("üíæ Th√®me :", savedTheme);
                
                if (savedTheme === "light") {
                    body.classList.add("light-mode");
                    themeIcon.setAttribute("data-lucide", "moon");
                    if (typeof lucide !== 'undefined') {
                        lucide.createIcons();
                    }
                }
                
                // Toggle au clic
                themeToggle.addEventListener("click", function() {
                    console.log("üñ±Ô∏è Clic !");
                    
                    body.classList.toggle("light-mode");
                    
                    if (body.classList.contains("light-mode")) {
                        console.log("üåû Mode LIGHT");
                        localStorage.setItem("theme", "light");
                        themeIcon.setAttribute("data-lucide", "moon");
                    } else {
                        console.log("üåô Mode DARK");
                        localStorage.setItem("theme", "dark");
                        themeIcon.setAttribute("data-lucide", "sun");
                    }
                    
                    // Re-init Lucide
                    if (typeof lucide !== 'undefined') {
                        lucide.createIcons();
                    }
                });
                
                console.log("‚úÖ Theme toggle OK");
            });
            
            // Initialiser Lucide
            if (typeof lucide !== 'undefined') {
                lucide.createIcons();
                console.log("‚úÖ Lucide OK");
            }
        </script>
        
        <!-- JavaScript Additionnels -->
        {% block javascripts %}
            {% block importmap %}{{ importmap('app') }}{% endblock %}
        {% endblock %}
    </body>
</html>
