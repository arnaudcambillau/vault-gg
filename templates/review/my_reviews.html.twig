{% extends 'base_app.html.twig' %}

{% block title %}Mes Avis - Vault.gg{% endblock %}

{% block content %}

<!-- Header -->
<header class="mb-6">
    <h1 class="text-3xl font-black mb-2 flex items-center gap-3">
        <i data-lucide="message-circle" class="w-9 h-9 text-indigo-500"></i>
        Mes Avis
    </h1>
    <p class="text-slate-400">{{ reviews|length }} avis publié{% if reviews|length > 1 %}s{% endif %}</p>
</header>

<!-- Liste des avis -->
{% if reviews|length > 0 %}
    <div class="space-y-4">
        {% for review in reviews %}
            <article class="glass rounded-2xl p-6">
                
                <!-- En-tête -->
                <div class="flex items-start justify-between mb-4">
                    <div>
                        <h3 class="text-xl font-bold text-slate-100 mb-1">{{ review.gameName }}</h3>
                        <div class="text-slate-400 text-sm">Publié le {{ review.createdAt|date('d/m/Y') }}</div>
                    </div>
                    
                    <!-- Note -->
                    <div class="flex items-center gap-1">
                        {% for i in 1..5 %}
                            <i data-lucide="star" class="w-4 h-4 {{ i <= review.rating ? 'text-amber-500 fill-amber-500' : 'text-slate-600' }}"></i>
                        {% endfor %}
                    </div>
                </div>

                <!-- Titre -->
                <h4 class="text-lg font-bold text-slate-100 mb-2">{{ review.title }}</h4>

                <!-- Contenu -->
                <p class="text-slate-300 mb-4">{{ review.content }}</p>

                <!-- Footer -->
                <div class="flex items-center justify-between">
                    <div class="flex items-center gap-4">
                        {% if review.isRecommended %}
                            <span class="bg-emerald-500/20 text-emerald-400 px-3 py-1 rounded-full text-sm font-semibold">
                                ✅ Recommandé
                            </span>
                        {% endif %}
                        <span class="text-slate-400 text-sm">{{ review.helpfulCount }} personne(s) ont trouvé cet avis utile</span>
                    </div>
                    
                    <div class="flex gap-2">
                        <a href="{{ path('app_game_reviews', {'id': review.gameId}) }}" 
                           class="bg-indigo-500/20 text-indigo-400 px-4 py-2 rounded-lg border border-indigo-500/30 font-semibold hover:bg-indigo-500/30 transition-all flex items-center gap-2">
                            <i data-lucide="eye" class="w-4 h-4"></i>
                            Voir tous les avis
                        </a>
                        
                        <form method="post" 
                              action="{{ path('app_review_delete', {'id': review.id}) }}" 
                              onsubmit="return confirm('Êtes-vous sûr de vouloir supprimer cet avis ?');">
                            <button type="submit" 
                                    class="bg-red-500/20 text-red-400 px-4 py-2 rounded-lg border border-red-500/30 font-semibold hover:bg-red-500/30 transition-all flex items-center gap-2">
                                <i data-lucide="trash-2" class="w-4 h-4"></i>
                                Supprimer
                            </button>
                        </form>
                    </div>
                </div>
            </article>
        {% endfor %}
    </div>
{% else %}
    <div class="glass rounded-2xl p-12 text-center">
        <i data-lucide="message-circle" class="w-16 h-16 text-slate-500 mx-auto mb-4"></i>
        <p class="text-slate-400 text-lg mb-4">Vous n'avez pas encore publié d'avis</p>
        <a href="{{ path('app_home') }}" 
           class="inline-flex items-center gap-2 bg-gradient-to-br from-indigo-500 to-violet-500 text-white px-6 py-3 rounded-lg font-semibold hover:-translate-y-0.5 transition-all">
            <i data-lucide="library" class="w-5 h-5"></i>
            Retour à ma bibliothèque
        </a>
    </div>
{% endif %}

{% endblock %}